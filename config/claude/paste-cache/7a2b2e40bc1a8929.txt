{
  response: 'To schedule the tasks, I will analyze the given tasks and apply the rules. \n' +
    '\n' +
    'Given tasks:\n' +
    '[\n' +
    '  {\n' +
    '    "id": "2b4e2db4-9397-4cca-9bf8-13c8fe3e08cc",\n' +
    '    "title": "buy groceries",\n' +
    '    "description": null,\n' +
    '    "priority": "low",\n' +
    '    "due_date": "2026-01-27",\n' +
    '    "duration": 50,\n' +
    '    "events": [\n' +
    '      {\n' +
    '        "id": "4cc54b35-658b-4f0e-9418-9f7832c42cd8",\n' +
    '        "date": "2026-01-28",\n' +
    '        "start_time": "09:00",\n' +
    '        "end_time": "09:50"\n' +
    '      }\n' +
    '    ]\n' +
    '  }\n' +
    ']\n' +
    '\n' +
    `Since the event for the task "buy groceries" already exists, I will update it. However, the existing event's date is after the task's due_date, so I will move it to the due_date.\n` +
    '\n' +
    'Here is the updated event:\n' +
    '{\n' +
    '  "task_id": "2b4e2db4-9397-4cca-9bf8-13c8fe3e08cc",\n',
  usage: { prompt_tokens: 443, completion_tokens: 256, total_tokens: 699 }
}
[wrangler:info] POST /api/ai/schedule 200 OK (2511ms)
âœ˜ [ERROR] Error processing event: {

    id: '2b4e2db4-9397-4cca-9bf8-13c8fe3e08cc',
    title: 'buy groceries',
    description: null,
    priority: 'low',
    due_date: '2026-01-27',
    duration: 50,
    events: [
      {
        id: '4cc54b35-658b-4f0e-9418-9f7832c42cd8',
        date: '2026-01-28',
        start_time: '09:00',
        end_time: '09:50'
      }
    ]
  } DrizzleQueryError: Failed query: select "title" from "tasks" where "tasks"."id" = ? limit ?
  params: ,1
      at D1PreparedQuery.queryWithCache
  (file:///home/jofre/projects/chronos/node_modules/.bun/drizzle-orm@0.45.0+04c11aec5f8488fc/node_modules/src/sqlite-core/session.ts:80:11)
      at async D1PreparedQuery.values
  (file:///home/jofre/projects/chronos/node_modules/.bun/drizzle-orm@0.45.0+04c11aec5f8488fc/node_modules/src/d1/session.ts:280:10)
      at async D1PreparedQuery.all
  (file:///home/jofre/projects/chronos/node_modules/.bun/drizzle-orm@0.45.0+04c11aec5f8488fc/node_modules/src/d1/session.ts:217:16)
  {
    query: 'select "title" from "tasks" where "tasks"."id" = ? limit ?',
    params: [ undefined, 1 ],
    cause: Error: D1_TYPE_ERROR: Type 'undefined' not supported for value 'undefined'
        at null.<anonymous> (cloudflare-internal:d1-api:305:19)
        at [object Object]
        ... 7 lines matching cause stack trace ...
        at SQLiteSelectBase.then
  (file:///home/jofre/projects/chronos/node_modules/.bun/drizzle-orm@0.45.0+04c11aec5f8488fc/node_modules/src/query-promise.ts:31:15)
  {
      [cause]: Error: Type 'undefined' not supported for value 'undefined'
          at null.<anonymous> (cloudflare-internal:d1-api:306:24)
          at [object Object]
          at D1PreparedStatement.bind (cloudflare-internal:d1-api:277:42)
          at null.<anonymous>
  (file:///home/jofre/projects/chronos/node_modules/.bun/drizzle-orm@0.45.0+04c11aec5f8488fc/node_modules/src/d1/session.ts:281:21)
          at D1PreparedQuery.queryWithCache
  (file:///home/jofre/projects/chronos/node_modules/.bun/drizzle-orm@0.45.0+04c11aec5f8488fc/node_modules/src/sqlite-core/session.ts:78:18)
          at D1PreparedQuery.values
  (file:///home/jofre/projects/chronos/node_modules/.bun/drizzle-orm@0.45.0+04c11aec5f8488fc/node_modules/src/d1/session.ts:280:21)
          at D1PreparedQuery.all
  (file:///home/jofre/projects/chronos/node_modules/.bun/drizzle-orm@0.45.0+04c11aec5f8488fc/node_modules/src/d1/session.ts:217:27)
          at SQLiteSelectBase.all
  (file:///home/jofre/projects/chronos/node_modules/.bun/drizzle-orm@0.45.0+04c11aec5f8488fc/node_modules/src/sqlite-core/query-builders/select.ts:950:26)
          at SQLiteSelectBase.execute
  (file:///home/jofre/projects/chronos/node_modules/.bun/drizzle-orm@0.45.0+04c11aec5f8488fc/node_modules/src/sqlite-core/query-builders/select.ts:962:15)
          at SQLiteSelectBase.then
  (file:///home/jofre/projects/chronos/node_modules/.bun/drizzle-orm@0.45.0+04c11aec5f8488fc/node_modules/src/query-promise.ts:31:15)
    }
  }

