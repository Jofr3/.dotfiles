{
  "$schema": "https://opencode.ai/config.json",
  "provider": {
    "anthropic": {
      "models": {
        "claude-sonnet-4-5-20250929": {
          "options": {
            "thinking": {
              "type": "disabled",
              "budgetTokens": 16000
            }
          }
        }
      }
    }
  },
  "tui": {
    "scroll_speed": 20
  },
  "mcp": {
    "nixos": {
      "type": "local",
      "command": ["nix", "run", "github:utensils/mcp-nixos", "--"]
    },
    "neovim": {
      "type": "local",
      "command": [ "bunx",  "-y", "mcp-neovim-server" ],
      "environment": {
        "ALLOW_SHELL_COMMANDS": "true",
        "NVIM_SOCKET_PATH": "/tmp/nvim"
      }
    },
    "browsermcp": {
      "type": "local",
      "command": [ "bunx", "-y", "@browsermcp/mcp@latest"]
    },
    "dbhub": {
      "type": "local",
      "command": [ "bunx", "@bytebase/dbhub", "--config=/home/jofre/.config/opencode/databases.toml" ]
    },
    "bruno": {
      "type": "local",
      "command": [ "bunx", "-y", "bruno-mcp-server" ]
    }
  },

  "agent": {
    "nixos": {
      "description": "Proactively help with NixOS system configuration, package management, and troubleshooting. Auto-invoked when user mentions NixOS options, system packages, configuration errors, rebuilding the system, or needs help finding NixOS settings. Search options and packages, suggest configurations, and help debug NixOS build issues.",
      "mode": "subagent",
      "tools": {
        "nixos_*": true
      }
    },
    "chrome": {
      "description": "Proactively monitor Chrome browser for errors, console logs, network issues, and performance problems during development. Auto-invoked when user mentions browser issues, testing, debugging web apps, or when code changes might affect the browser. Use this agent to check browser state, capture screenshots, inspect console output, and validate web application behavior.",
      "mode": "subagent",
      "tools": {
        "chrome_*": true
      }
    },
    "neovim": {
      "description": "Proactively assist with Neovim text editing, navigation, and code manipulation. Auto-invoked when user wants to open files in vim, perform search-replace operations, navigate to specific code locations, or execute vim commands. Use this agent to edit code in Neovim, locate functions/classes, perform refactoring, and manage vim buffers.",
      "mode": "subagent",
      "tools": {
        "neovim_*": true
      }
    },
    "bruno": {
      "description": "Proactively assist with API testing, HTTP requests, and Bruno collection management. Auto-invoked when user mentions API testing, REST endpoints, HTTP requests, Bruno collections, running requests, testing APIs, or validating endpoints. Use this agent to discover collections, list requests, run API tests, validate responses, and manage Bruno environments.",
      "mode": "subagent",
      "tools": {
        "bruno_*": true
      }
    }
  },
  "command": {
    "check-browser": {
      "description": "Check Chrome browser for console errors, warnings, and current page state",
      "template": "Use the chrome agent to check the current state of the browser. Get console logs (errors and warnings), current page URL and title, and take a screenshot if there are any errors. Report any issues found."
    },
    "watch-browser": {
      "description": "Start monitoring Chrome browser and report any errors or issues",
      "template": "Use the chrome agent to monitor the browser. Check for console errors, network failures, and JavaScript exceptions. Report the current state and any problems detected. Suggest fixes if errors are found."
    },
    "nixos-rebuild": {
      "description": "Search for NixOS options and help rebuild the system configuration",
      "template": "Use the nixos agent to help with system configuration. If the user mentioned specific options or packages, search for them. Provide configuration examples and suggest the appropriate rebuild command (nixos-rebuild switch or home-manager switch)."
    },
    "vim-edit": {
      "description": "Open a file in Neovim and optionally navigate to a specific location",
      "template": "Use the neovim agent to open the file specified by the user in Neovim. If a line number or function name was mentioned, navigate to that location. Report whether the operation succeeded."
    },
    "bruno-discover": {
      "description": "Discover Bruno collections in the current directory or project",
      "template": "Use the bruno agent to discover all Bruno collections in the current directory or specified path. List the collections found and show their request counts."
    },
    "bruno-run": {
      "description": "Run a specific Bruno request or entire collection",
      "template": "Use the bruno agent to run the specified Bruno request or collection. Show the response status, headers, and body. Report any errors or failures."
    },
    "bruno-test": {
      "description": "Run all tests in a Bruno collection and report results",
      "template": "Use the bruno agent to run all requests in the specified Bruno collection. Report the test results, including pass/fail status, response times, and any errors encountered."
    }
  }
}
